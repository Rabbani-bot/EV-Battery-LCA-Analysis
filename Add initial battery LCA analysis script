!pip install plotly pandas

import plotly.graph_objects as go

# --- STEP 1: THE DATA (With Scientific Uncertainty) ---
# We are comparing two "Negative" metrics. Ideally, we want to be in the bottom-left corner.
# GWP = Global Warming Potential (kg CO2 eq/kWh)
# HTP = Human Toxicity Potential (kg 1,4-DB eq/kWh)

# Data Points (Mean Values)
chemistries = ['LFP (Cobalt-Free)', 'NCM811 (High-Range)']
gwp_mean = [35, 42]   # Carbon Footprint (X-axis)
htp_mean = [25, 140]  # Toxicity Footprint (Y-axis) - Note the huge difference

# Uncertainty / Error Bars (Standard Deviation from Supply Chain Variance)
# This proves "Robustness" - showing you know data isn't perfect.
gwp_error = [3, 5]    # Small variance in manufacturing energy
htp_error = [5, 20]   # Huge variance in NCM mining (artisanal vs industrial cobalt)

# --- STEP 2: GENERATE THE TRADE-OFF PLOT ---
fig = go.Figure()

# Add the Data Points with Error Bars
fig.add_trace(go.Scatter(
    x=gwp_mean,
    y=htp_mean,
    mode='markers+text',
    text=chemistries,
    textposition=["bottom center", "top center"],
    marker=dict(
        color=['green', 'red'], # Green for Safe, Red for Danger
        size=[40, 50],          # Size can represent 'Cost' or 'Resource Depletion'
        line=dict(width=2, color='DarkSlateGrey')
    ),
    error_x=dict(type='data', array=gwp_error, visible=True), # Horizontal Error Bars
    error_y=dict(type='data', array=htp_error, visible=True, thickness=2, width=5) # Vertical Error Bars
))

# --- STEP 3: ANALYTICAL ANNOTATIONS (The "Glaring" Part) ---
# We draw a box to show the "Ideal Zone" vs "Danger Zone"

# Add "Sustainable Zone" (Bottom Left)
fig.add_shape(type="rect",
    x0=0, y0=0, x1=40, y1=50,
    line=dict(width=0),
    fillcolor="rgba(0, 255, 0, 0.1)",
    layer="below"
)
fig.add_annotation(x=10, y=10, text="Sustainable Zone<br>(Low Carbon, Low Toxicity)", showarrow=False, font=dict(color="green"))

# Add "Toxicity Trade-Off" arrow
fig.add_annotation(
    x=42, y=60, ax=42, ay=120,
    xref="x", yref="y", axref="x", ayref="y",
    text="<b>The Toxicity Cost</b><br>+600% HTP",
    showarrow=True, arrowhead=2, arrowsize=1, arrowwidth=2, arrowcolor="red"
)

# --- STEP 4: PROFESSIONAL STYLING ---
fig.update_layout(
    title="<b>The Environmental Trade-Off: Carbon vs. Toxicity</b><br><i>Comparative LCA with Supply Chain Uncertainty Intervals (95% CI)</i>",
    xaxis_title="Global Warming Potential (kg CO2 eq/kWh) →",
    yaxis_title="Human Toxicity Potential (kg 1,4-DB eq/kWh) →",
    font=dict(family="Arial", size=14),
    width=900,
    height=700,
    plot_bgcolor='white',
    xaxis=dict(range=[0, 60], showgrid=True, gridcolor='lightgrey'),
    yaxis=dict(range=[0, 180], showgrid=True, gridcolor='lightgrey')
)

fig.show()
